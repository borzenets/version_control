# How to work with git

## Первый запуск Git

#### Представимся
После того как вы установили Git, первым делом нужно представится, делается это так:
```sh
git config --global user.name "Your username"
git config --global user.email "Your email" 
```

Псмотреть UserName, Mail и другие настройки мжно командой
```sh
git config --list
```
или
```sh
git config --list --show-origin
```
#### Редактор в Git

По умлчанию Git использует стандартный редактор в вашей системе, если вы хотите изменить редактр в котором будете набирать сообщения в Git, сделать это можно с помощью команды:
```sh
git config --global core.editor nvim
```
nvim - это редактор который будет использоваться в Git.

#### Ветка по умолчанию в Git

Если вы хотите установить имя main для вашей ветки по умолчанию, выполните следующую команду:
```sh
git config --global init.defaultBranch main
```

## Инициализация репозитория

#### Создание репозитория в существующем каталге (git init)

Для начала нужно перейти в католог в которов у вас будет репозиторий и выполнить кманду:
```sh
git init
```
Эта команда создаёт в текущем каталоге новый подкаталог с именем .git, содержащий все необходимые файлы репозитория.

#### Клонирование существующего репозитория (git clone)

Для получения копии существующего Git-репозитория, например, проекта, в который вы хотите внести свой вклад, необходимо использовать команду:
```sh
git clone https://github.com/borzenets/version_control.git
```
или с указанием каталга (например MyFolder) в который будет размещен проект:
```sh
https://github.com/borzenets/version_control.git MyFolder
```
В предыдущем примере использовался протокол https://, вы также можете встретить git:// или user@server:path/to/repo.git, использующий протокол передачи SSH.

## Запись изменений в репозиторий

#### Определение состояния файлов (git status)

Для определения состояния файлов используется команда:
```sh
git status
```
Сокращенный вывод вывод команды status:
```sh
git status -s
```

#### Отслеживание новых файлов, добавление в индекс (git add)

Для того чтобы начать отслеживать (добавить под версионный контроль) новый файл, используется команда:
```sh
git add fileName
```

#### Удалить файл из индекса/индекса и рабочей области (git git rm)
Удалить файл из индекса и из отслеживаемых, оставив его при этом в рабочем каталоге:
```sh
git git rm --cached fileName
```
Если использовать git rm без параметра --cached, git удалит файл из вашего рабочего каталога, так что в следующий раз вы не увидите его как «неотслеживаемый».

#### Игнорирование файлов (.gitignore)

Для того чтобы Git не обращал внимания на файл или какталог необходимо создать файл .gitignore и в него построчно внести имена файлов, каталогов или шаблоны.

Пример шаблонов:
```.gitignore
# Исключить все файлы с расширением .a
*.a

# Но отслеживать файл lib.a даже если он подпадает под исключение выше
!lib.a

# Исключить файл TODO в корневом каталоге, но не файл в subdir/TODO
/TODO

# Игнорировать все файлы в каталоге build/
build/

# Игнорировать файл doc/notes.txt, но не файл doc/server/arch.txt
doc/*.txt

# Игнорировать все .txt файлы в каталоге doc/
doc/**/*.txt
```

#### Просмотр индексированных и неиндексированных изменений (git diff)

Чтобы увидеть, что же вы изменили, но пока не проиндексировали, наберите:
```sh
git diff
```
Эта команда сравнивает содержимое вашего рабочего каталога с содержимым индекса.

Если вы хотите посмотреть, что вы проиндексировали и что войдёт в следующий коммит, вы можете выполнить:
```sh
git diff --staged
```
Эта команда сравнивает ваши проиндексированные изменения с последним коммитом

#### Коммит изменений (git commit)

Когда все нудные файлы сохранены и добавлены в индекс, можно зафиксировать изменения командой:
```sh
git commit -m "сдесь нужно дабавить коментарий к комиту"
```
Git может автоматически индексировать каждый уже отслеживаемый на момент коммита файл, позволяя вам обойтись без git add, для этого нужно добавить параметр -a, пример:
```sh
git commit -a -m "сдесь нужно дабавить коментарий к комиту"
```

## Просмотр истории коммитов (git log)

После того, как вы создали несколько коммитов или же клонировали репозиторий с уже существующей историей коммитов, вероятно вам понадобится возможность посмотреть что было сделано — историю коммитов. делается это командой:
```sh
git log
```
Данная команда выводит на экран коммиты в обратном хронологическом порядке с SHA-1 контрольными суммами, именем и электронной почтой автора, датой создания и сообщением коммита.

Команда git log имеент большое количество опций.

Одним из самых полезных аргументов является -p или --patch, который показывает разницу, внесенную в каждый коммит, пример:
```sh
git log -p
```
Можно ограничить количество записей в выводе команды -(n), n - число комитов:
```sh
git log -p -3
```

Опция --stat, отобразит для каждого коммита измененные файлы и количество дабавленных и удаленных файлов и них, пример:
```sh
git log --stat
```

Действительно полезной опцией является --pretty, эта опция меняет формат вывода, есть несколько встроенных вариантов отображения:
```sh
git log pretty=oneline
```
Выводит каждый коммит в одну строку.

```sh
git log pretty=(short, full, fuller)
```
Делают вывод приблизительно в том же формате, но с меньшим или большим количеством информации.

Наиболее интересной опцией является format:
```sh
git log --pretty=format:"%h - %an, %ar : %s"
```
Опции для git log --pretty=format:

| Опция |  Описание вывода             |
|-------|------------------------------|
| %H    | Хеш коммита                  |
| %h    | Сокращенный хэш коммита      |
| %T    | Хеш дерева                   |
| %t    | Сокращенный хэш дерева       |
| %P    | Хеш родителей                |
| %p    | Сокращенный хеш родителей    |
| %an   | Имя автора                   |
| %ae   | Электронная почта автора     |
| %ad   | Дата автора (формат даты можно задать опцией --date=option) |
| %ar   | Относительная дата автора    |
| %cn   | Имя коммитера                |
| %ce   | Электронная почта коммитера  |
| %cd   | Дата коммитера               |
| %cr   | Относительная дата коммитера |
| %s    | Содержание                   |

(информация на данный момент избыточная, но скорее всего в будущем пригодится)

Опция:
```sh
git log --oneline
```
Показывает первые несколько символов хеша и выводит информацию в одну строку

Опция для отображения графа с ветвлениями и историей слияний:
```sh
git log --graph
```
Опции --oneline и --graph удобно использовать вместе:
```sh
git log --oneline --graph
```

Опция поиска и отображения коммитов содержащих фрагмент изменяемой строки:
```sh
git log -S "Искомый фрагмент строки"
```
Опций у git log значительно больше чем описано тут, более подробную информацию можно найти по ссылке ![Просмотр истории коммитов](https://git-scm.com/book/ru/v2/Основы-Git-Просмотр-истории-коммитов)


## Операции отмены

***Будьте осторожны, не все операции отмены в свою очередь можно отменить! Это одна из редких областей Git, где неверными действиями можно необратимо удалить результаты своей работы.***

#### Внести правки в предыдущий коммит
Если вы хотите переделать коммит — внесите необходимые изменения, добавьте их в индекс и сделайте коммит ещё раз, указав параметр:
```sh
git commit --amend
```
Очень важно понимать, что когда вы вносите правки в последний коммит, вы не столько исправляете его, сколько заменяете новым, который полностью его перезаписывает.

#### Отмена индексации файла (git restore)
Для исключения файли из индекса, если вы его туда по ошибке добавили:
```sh
git restore --staged имя_файла
```

#### Откат измененного файла (git restore)
Tсли вы поймете, что не хотите сохранять изменения в файле, вернуть обратно к тому, как он выглядел при последнем добавлении в индекс (скорее всего это было при последнем коммите), можно командой:
```sh
git restore имя_файла
```

Можно восстановить файл из лебого ранее сделанного коммита, для этого ипользуется оция --source:
```sh
git restore --source хеш_коммита имя_файла
```
Важно понимать, что git restore <file> — опасная команда. Любые локальные изменения, внесенные в этот файл, исчезнут — Git просто заменит файл в вашей рабочей области.




